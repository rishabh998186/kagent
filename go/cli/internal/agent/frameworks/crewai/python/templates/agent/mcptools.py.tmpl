"""
MCP Tools integration for CrewAI agents.
Any changes to this file will be overwritten.
"""
import os
import re
from typing import List, Optional
from crewai_tools import BaseTool

# MCP server configuration (same as LangGraph)
MCP_SERVERS = [
    {{- range .McpServers }}
    {
        "name": "{{.Name}}",
        "type": "{{.Type}}",
        {{- if eq .Type "remote" }}
        "url": "{{.URL}}",
        {{- if .Headers }}
        "headers": {
            {{- range $key, $value := .Headers }}
            "{{$key}}": "{{$value}}",
            {{- end }}
        },
        {{- end }}
        {{- end }}
    },
    {{- end }}
]

def resolve_env_vars(value: str) -> str:
    """Resolve environment variables in a string value."""
    def replace_var(match):
        var_name = match.group(1)
        return os.environ.get(var_name, match.group(0))
    
    return re.sub(r'\$\{([^}]+)\}', replace_var, value)

def get_mcp_tools(server_names: Optional[List[str]] = None) -> List[BaseTool]:
    """
    Get MCP tools from configured servers as CrewAI tools.
    
    Args:
        server_names: Optional list of server names to include.
        
    Returns:
        List of CrewAI BaseTool instances from MCP servers.
    """
    # Implementation similar to LangGraph but adapted for CrewAI
    # This would wrap MCP tools as CrewAI BaseTool instances
    tools = []
    # Implementation here
    return tools
